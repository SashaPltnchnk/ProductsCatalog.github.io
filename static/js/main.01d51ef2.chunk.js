(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(53)},30:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),l=a(2),o=a(3),i=a(5),u=a(4),m=a(6),h=(a(30),a(55)),d=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logOut=function(){localStorage.clear(),a.props.checkStateIsAuthed()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"right"},r.a.createElement("button",{className:"btn purple darken-3",onClick:this.logOut},"Log Out")))}}]),t}(n.Component),p=a(54),v=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"right"},r.a.createElement("button",{className:"btn purple darken-3"},r.a.createElement(p.a,{to:"/login"},"Log In")),r.a.createElement("button",{className:"btn purple darken-3"},r.a.createElement(p.a,{to:"/register"},"Register")))}}]),t}(n.Component),f=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{to:"/",className:"brand-logo"},"Mr. Robot"),this.props.isAuthorized?r.a.createElement(d,{checkStateIsAuthed:this.props.checkStateIsAuthed}):r.a.createElement(v,null)))}}]),t}(n.Component),g=a(11),b=a.n(g),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={rate:0,text:""},a.leaveComment=function(){b.a.defaults.headers.common={Authorization:"Token ".concat(localStorage.getItem("token"))},b.a.post("http://smktesting.herokuapp.com/api/reviews/".concat(a.props.id),a.state).then(function(e){console.log("Success, ".concat(e)),a.props.getComments(),a.setState({rate:0,text:""})}).catch(function(e){return console.log("Something went wrong".concat(e))})},a.handleChange=function(e){a.setState({text:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Leave a comment:"),this.props.isAuthorized?r.a.createElement("div",null,r.a.createElement("span",null,"Rate: "),new Array(5).fill(0).map(function(t,a){return r.a.createElement("button",{className:"btn purple lighten-3 waves-effect waves-purple rate-button ".concat(e.state.rate===a+1?"active":""),key:a,onClick:function(){return e.setState({rate:a+1})}},a+1)}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"textarea1",className:"materialize-textarea",name:"text",value:this.state.text,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"textarea1"},"Write your comment")),r.a.createElement("button",{className:"btn purple accent-4",onClick:this.leaveComment},"Leave a comment"))):r.a.createElement("span",{className:"red-text"},"You have to registate or to log in to have a possibility of leaving comments"))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={feedback:null},a.getComments=function(){b.a.get("http://smktesting.herokuapp.com/api/reviews/".concat(a.props.id)).then(function(e){a.setState({feedback:e.data})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getComments()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,{isAuthorized:this.props.isAuthorized,getComments:this.getComments,id:this.props.id}),r.a.createElement("h3",null,"Comments:"),null===this.state.feedback?null:this.state.feedback.reverse().map(function(e){return r.a.createElement("div",{className:"feedback",key:e.id},r.a.createElement("div",null,r.a.createElement("span",{className:"purple-text"},"Rate: "),e.rate),r.a.createElement("div",null,r.a.createElement("span",{className:"purple-text"},"Comment: "),e.text),r.a.createElement("div",null,r.a.createElement("span",{className:"purple-text"},"Leaved by: "),e.created_by.username))}))}}]),t}(n.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.params;return r.a.createElement("div",{className:"fg1"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 right"},r.a.createElement("div",{className:"card center"},r.a.createElement("div",{className:"card-image col m6"},r.a.createElement("img",{className:"full-image",src:"http://smktesting.herokuapp.com/static/img".concat(e.id,".png"),alt:e.title})),r.a.createElement("div",{className:"card-content"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.text))))),r.a.createElement("div",{className:"col s12 m12"},r.a.createElement(k,{id:e.id,isAuthorized:this.props.isAuthorized})))}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:null,activeProduct:null},a.showCatalog=function(){b.a.get("http://smktesting.herokuapp.com/api/products/").then(function(e){a.setState({data:e.data})}).catch(function(e){return console.log("Something went wrong".concat(e))})},a.showProductInfo=function(e){a.setState({activeProduct:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.data;return r.a.createElement("div",{className:"section d-flex"},r.a.createElement("div",{className:"d-flex space-between fdc"},r.a.createElement("button",{className:"btn purple darken-1",onClick:this.showCatalog},"Open catalog"),this.state.data?t.map(function(t){return r.a.createElement("button",{className:"btn purple lighten-2",onClick:function(){return e.showProductInfo(t.id)},key:t.id},t.title)}):r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-green"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))),null==this.state.activeProduct?null:r.a.createElement(O,{isAuthorized:this.props.isAuthorized,params:this.state.data.find(function(t){return t.id===e.state.activeProduct})}))}}]),t}(n.Component),j=a(22),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:null},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleClick=function(){var e=a.state,t=e.username,n=e.password;b.a.post("http://smktesting.herokuapp.com/api/".concat(a.props.authPath,"/"),{username:t,password:n}).then(function(e){e.data.success?(localStorage.setItem("token",e.data.token),a.props.history.push("/"),a.props.checkStateIsAuthed()):a.setState({error:e.data.message})}).catch(function(e){return console.log("Something went wrong".concat(e))})},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.buttonName;return r.a.createElement("div",{className:"container"},this.state.error?r.a.createElement("h4",{className:"red-text"},"!!! ",this.state.error," "):null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h3",{className:"grey-text text-darken-3"},e),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{value:this.state.username,type:"text",id:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{value:this.state.password,type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn purple darken-3",onClick:this.handleClick},e))))}}]),t}(n.Component),y=a(56),A=function(e){return r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"column"},e.isAuthorized?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{path:"/login",render:function(t){return r.a.createElement(w,Object.assign({},t,{buttonName:"Log In",authPath:"login",checkStateIsAuthed:e.checkStateIsAuthed}))}}),r.a.createElement(y.a,{path:"/register",render:function(t){return r.a.createElement(w,Object.assign({},t,{buttonName:"Register",authPath:"register",checkStateIsAuthed:e.checkStateIsAuthed}))}})),r.a.createElement(N,{isAuthorized:e.isAuthorized})))},C=function(){return!!localStorage.getItem("token")},S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthorized:C()},a.checkStateIsAuthed=function(){a.setState({isAuthorized:C()}),console.log(C())},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(f,{isAuthorized:this.state.isAuthorized,checkStateIsAuthed:this.checkStateIsAuthed}),r.a.createElement(A,{isAuthorized:this.state.isAuthorized,checkStateIsAuthed:this.checkStateIsAuthed})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.01d51ef2.chunk.js.map